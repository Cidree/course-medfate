---
title: "Exercise 2c guidelines"
author: "Rodrigo Balaguer"
date: '2024-11-13'
output:
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Exercise objectives

  1. Perform an advanced water balance run on a real-case data and inspect LFMC results
  2. Evaluate the performance of the water balance model with observed data
  3. Correct soil rock fragment content values, perform a second water balance run and inspect the results
  4. Compare LFMC dynamics with annual fire hazard values

## Exercise data
### Tevissa study plot 

 + Tivissa study plot is located in south Tarragona mountains (41°03'10.8" N 0°47'57.2" E) at 555 m elevation)
 + The climate is Mediterranean, with a water stress period in summer
 + The study plot is dedicated to measure LFMC dynamics, which is the moisture content of live plant tissues, a variable used to predict wildfire danger.

### Target stand
 + The stand is dominated by shrublands covered with *Quercus coccifera* (30%) and *Rosmarinus officinalis* (50%)
 + The LFMC observations are available for year 2014

## Guidelines by steps

1. Load the file `"tevissa.rds"`, which contains all the necessary data.

```{r}

```

2. Build a `forest` object including the two shrub cohorts given in the input data. 

```{r}

```

3. Initialize an object `soil` using the physical soil description included in the input data. Examine its water holding and extractable water capacity.

```{r}

```

4. Modify the default species parameter table provided in medfate using `customParams` (*hint*: use function `modifySpParams()`).

```{r}

```

5. Assemble three water balance input objects under the basic water balance model, each time using a different sub-model for vertical soil water fluxes (*hint*: check option `soilDomains` in `defaultControl()`).

```{r}

```

6. Run the basic water balance simulation under each case soil sub-model, while examining the computational time (*hint*: use `system.time()`):

```{r}

```

7. Compare annual values of water balance components under the three sub-models (*hint*: use the `summary()` function for `spwb` objects). Which sub-model generates highest run-off ? Which one generates highest deep drainage? Why?

```{r}

```

8. Compare daily temporal patterns of water exported under the three sub-models (*hint*: use function `plot()` with `type = "Export"`):

```{r}

```

9. Compare the observed vs. simulated soil water content under the three sub-models. Which sub-model do you think better fits the measured soil water content dynamics? Why? (*hint*: use function `evaluation_plot()`)

```{r}

```


---
title: "2.3 - Forest water and energy balance (exercise)"
author: "Miquel De Cáceres"
institute: "Ecosystem Modelling Facility, CREAF"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    css: ["resources/css/custom.css", "default-fonts", "default"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: 16:9
    seal: false
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE, warning=FALSE}
options(
  htmltools.dir.version = FALSE,
  width = 100
)
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include = FALSE}
library(meteoland)
library(medfate)
library(sp)
```

# 2.3 - Forest water and energy balance (exercise)

## Miquel De Cáceres

### Ecosystem Modelling Facility

### `r Sys.Date()`

<img class="logo-title" src="resources/img/emf_logo.svg" width=300>


---
layout: false

<div class=my-header>
    <img class="emf-logo" src="resources/img/emf_logo.svg">
</div>

<div class=my-footer></div>

# Exercise setting

## Goal

Learn some of the common issues that arise in the process of preparing model inputs.

--

## Objectives

  1. Build `forest` objects from a tree data frame of forest inventory data
  2. Retrieve soil physical properties from SoilGrids
  3. Interpolate daily weather on the plot location

--

## Data

Package **medfateutils** includes a data frame (`poblet_trees`), corresponding to forest inventory data in a dense holm oak forest. As a result of the abandonment of coppicing in the area, there is a high density of stems per individual.

   + *Location*: Poblet (Catalonia, Spain); long/lat: 1.0219º, 41.3443º
   + *Topography*: elevation = 850 m, slope = 15.1º, aspect = 15º
   + *Tree data*: Stem diameter measurements on two plots: *control* and *managed*. The management involved a reduction of the number of stems per individual. The data includes the forest inventory before and after thinning.

---
layout: true

<div class=my-header>
    <img class="emf-logo" src="resources/img/emf_logo.svg">
</div>

<div class=my-footer></div>

# Exercise resolution

---

## Loading packages and data

You may need to install **medfateutils** from GitHub:
```{r, eval=FALSE}
devtools::install_github("emf-creaf/medfateutils")
```

--


